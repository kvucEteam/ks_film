function loadData(e){$.ajax({url:e,dataType:"text",async:!1,success:function(e,t,n){JsonObj=jQuery.parseJSON(e);for(var s in JsonObj){var o=Object.keys(JsonObj[s]);"stops"==o?(void 0,stops=JsonObj[s].stops):"video"==o?videoId=JsonObj[s].video:"intro_header"==o?intro_header=JsonObj[s].intro_header:"intro_knap"==o?intro_knap=JsonObj[s].intro_knap:"intro_text"==o&&(intro_text=JsonObj[s].intro_text)}var r=stops.length;popudwidth=450,popud_left=0;for(var a=0;r>a;a++)timestamp_Array.push(stops[a].timestamp);setUpTube()},error:function(e,t,n){void 0}})}function loadGenericData(){runde=0,events_taeller=0,total_score=0,total_spm=0,playing=!1,void 0,$(".popud").html(""),$(".intro").html(""),$.ajax({dataType:"text",async:!0,success:function(e,t,n){timestamp_Array=[],JsonObj=JsonVideoInput_update,void 0;for(var s in JsonObj){var o=Object.keys(JsonObj[s]);"stops"==o?(void 0,stops=JsonObj[s].stops):"video"==o?videoId=JsonObj[s].video:"intro_header"==o?intro_header=JsonObj[s].intro_header:"intro_knap"==o?intro_knap=JsonObj[s].intro_knap:"intro_text"==o&&(intro_text=JsonObj[s].intro_text)}if(stops)var r=stops.length;popudwidth=450,popud_left=0;for(var a=0;r>a;a++)timestamp_Array.push(stops[a].timestamp);setUpTube()},error:function(e,t,n){void 0}})}function setUpTube(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function onYouTubeIframeAPIReady(){setupplayer(),void 0}function setupplayer(){$("#overlay").toggle(),player=new YT.Player("player",{videoId:videoId,playerVars:{id:"ytPlayer",enablejsapi:1,allowScriptAccess:"always",mediaPlaybackRequiresUserAction:!1,version:3,controls:1,showinfo:0,modestbranding:1,html5:1,playsinline:1,rel:0,autoplay:!1,wmode:"transparent",allowFullScreen:!1},events:{onStateChange:function(e){playing=e.data==YT.PlayerState.PLAYING?!0:!1},onReady:function(e){introscreen(),minutes=Math.floor(player.getDuration()/60),seconds=Math.floor(player.getDuration()-60*minutes),total_spille_tid=minutes+":"+seconds,void 0,checkTimer=setInterval(timerCheck,200)}}}),$(".popud").css("width",popudwidth),$(".popud").css("left",popud_left)}function timerCheck(){1==playing&&$(".ipad").hide();var e=Math.round(player.getCurrentTime()),t=$(".embed-responsive").css("height");$("#overlay").css("height",t),$("#time_bar").css("width",player.getCurrentTime()/player.getDuration()*$(".embed-responsive-16by9").width());var n=e-60*m;n>59&&m++;var s=n;10>s&&(s="0"+s);var o=parseInt(timestamp_Array[runde]),r=o-e,a=r%60;10>a&&(a=a.toString(),a="0"+a);var l=Math.floor(r/60);playing===!0?runde>=stops.length?$("#time").html(m+":"+s+"<span style ='color:#bbb'>/"+total_spille_tid+"  </span>"):$("#time").html(m+":"+s+"<span style ='color:#bbb'>/"+total_spille_tid+"  </span>(Næste spørgsmål om: "+l+":"+a+")"):$("#time").html("Video på pause"),void 0;for(var i=0;i<timestamp_Array.length;i++)e>=timestamp_Array[i]&&e<timestamp_Array[i]+2&&playing===!0&&(clearInterval(checkTimer),playing=!1,player.pauseVideo(),stop_event(runde,0))}function resumeVideo(){player.playVideo(),window.setTimeout(function(){checkTimer=setInterval(timerCheck,200)},5e3),void 0}function introscreen(){}function stop_event(e,t){var n=!1;0===events_taeller&&$("#overlay").fadeIn(),akt_runde=stops[0],spm=akt_runde.events[t],spm_length=akt_runde.events.length,tekst=spm.tekst,bol=spm.korrekt,svar_length=spm.svar.length,svar=spm.svar;for(var s="",o=0;svar_length>o;o++)"svarknap"==spm.eventtype?s=s+"<div id ='"+o+"' class='btn svar_btn btn-info'>"+svar[o]+"</div>":"checkbox"==spm.eventtype?s=s+"<div id ='"+o+"' class='btn svar_btn btn-info'>"+svar[o]+"</div>":"info"==spm.eventtype&&(s="");"info"==spm.eventtype&&$("#overlay").html("<div class='btn btn-default btn-lg btn_videre'>Fortsæt</div>"),$(".btn_videre").hide(),"info"==spm.eventtype?$("#overlay").click(function(){next_event()}):$(".svar_btn").click(function(){"svarknap"==spm.eventtype?($(".svar_btn").removeClass("btn_chosen btn-primary"),$(".svar_btn").addClass("btn-info"),$(this).addClass("btn_chosen btn-primary"),$(this).removeClass("btn-info")):($(this).toggleClass("btn_chosen btn-primary"),$(this).toggleClass("btn-info")),0==n&&($(".btn_videre").fadeIn().click(commit_answers),n=!0)})}function commit_answers(){var e,t=0,n=0;$(".btn_videre").hide(),"svarknap"==spm.eventtype?(e=$(".btn_chosen").attr("id"),e==spm.korrekt?(total_score++,$(".btn_chosen").css("background-color","#0dcea0").css("border","1px solid #0dcea0"),$(".score_num").fadeOut(20,function(){$(".score_num").html(total_score),$(".score_num").fadeIn()})):$(".btn_chosen").css("background-color","#ed3e3a").css("border","1px solid #ed3e3a")):(e=[],$(".btn_chosen").each(function(){var e=($(this).index(),$(this).attr("id"));spm.korrekt.indexOf(e)>-1?($(this).css("background-color","#2abb2a").css("border","1px solid #2abb2a"),t++,void 0):(n++,$(this).css("background-color","#ed3e3a").css("border","1px solid #ed3e3a"),void 0)}),t>=spm.korrekt.length&&0===n?(void 0,total_score++,$(".score_num").fadeOut(20,function(){$(".score_num").html(total_score),$(".score_num").fadeIn()})):void 0),$(".svar_btn").each(function(){$(this).hasClass("btn_chosen")||$(this).css("opacity","0")}),feedback()}function feedback(){for(var e="",t=0;t<spm.korrekt.length;t++)e=e+"<li class='correctliste'>"+svar[spm.korrekt[t]]+"</li>";$(".svarcontainer").delay(2e3).fadeOut(1e3,function(){$(".spm_tekst").fadeOut(0),$(".container_tekst").append("<div class='feedback'><div class='h3'>"+spm.feedback+"</div><div class = 'h4'><div class='correct_answers btn-success'>Rigtig besvarelse: </div>"+e+"<br/></div>"),$(".overlay").append("<div class ='btn btn-default btn-lg introknap btn_videre'>Fortsæt</div>"),$(".feedback").fadeOut(0),$(".feedback").fadeIn(1e3),$("#overlay").click(next_event)})}function next_event(){"info"!=spm.eventtype&&total_spm++,events_taeller++,spm_length>events_taeller?(void 0,$(".feedback").remove(),$("#overlay").unbind(),setTimeout(function(){stop_event(runde,events_taeller)},100)):(void 0,$("#overlay").fadeOut(1e3,function(){$(".feedback").remove(),$("#overlay").unbind(),resumeVideo(),events_taeller=0,runde++}))}function slutFeedback(){$("#overlay").unbind(),$(".popud").html("<h3 class = 'forfra'>Du har besvaret alle spørgsmålene. <br>Du svarede rigtigt på "+total_score+" ud af "+total_spm+" spørgsmål.</h3><div class='btn btn-default btn-lg forfra_knap'>Prøv igen</div><div class='btn btn-default btn-lg continue_film'>Se resten af filmen</div>"),$(".forfra_knap").click(function(){location.reload()}),$(".continue_film").click(function(){$("#overlay").fadeOut(1e3,function(){$(".feedback").remove(),$("#overlay").unbind(),resumeVideo(),clearInterval(checkTimer),events_taeller=0,runde++})})}var runde=0,events_taeller=0,total_score=0,total_spm=0,playing=!1,player,playtime,xmlData,stops,videoId,popudwidth,popud_left,total_spille_tid,akt_runde,spm,spm_length,tekst,bol,svar_length,svar,m=0,checkTimer,minutes=60,seconds,timestamp_Array=[],JsonObj,JsonVideoInput_update,intro_header,intro_knap,intro_text;